# 项目初始化（仅限规划阶段）

你有一份想法文件（自由格式，任何形式）和检测到的环境信息。
你的任务是：仅创建规划文件（CONTEXT.md、TASKS.md、specs/）。

## 重要：此为规划阶段，非实施阶段
- 你创建路线图，通过"规划→执行→审查→修复"循环来构建它
- 请勿编写任何源代码、HTML、CSS、JavaScript、Python等
- 请勿创建实际的项目文件（index.html、app.py、main.js等）
- 仅创建：CONTEXT.md、TASKS.md 以及 specs/*.md 文件
- 你创建的任务将在开发循环中逐一实现

## 核心原则：尊重想法
- 用户的想法是唯一依据——不要改变他们的概念
- 如果他们指定了某些内容，请完全按照其指定使用
- 如果未指定，请根据上下文合理推断
- 填补空白使其可构建，但保留其意图
- 详细的规格说明需要较少推断；模糊的想法需要更多推断

## 阶段1：理解
1.  阅读想法文件——提取用户实际想要的内容
2.  识别什么是已指定的（原样使用）与什么是未指定的（推断）
3.  检查检测到的环境以了解现有技术栈
4.  如果存在 CLAUDE.md，请阅读现有项目规则
5.  **如果是现有项目**：请探索代码库！阅读源代码文件以了解：
    - 已构建的内容
    - 使用的代码模式和架构
    - 想法要求添加或更改的内容与现有内容的对比

## 阶段2：推断缺失部分（仅在未指定时）
对于用户未指定的任何内容，做出明智选择：
- 技术栈：使用检测到的，或选择适合项目类型的
- 架构：简单且适合范围（或遵循现有模式）
- 范围：按表面价值理解想法——不要扩大或缩小

## 测试原则：如果你无法测试它，就建立一个测试方法
除非用户明确说明"无需测试"，否则你必须包含测试：
- 尽早添加测试框架设置任务（jest、pytest、vitest等）
- 为每个主要功能包含测试任务
- 测试使得"审查"步骤能够自动验证工作
- 没有测试，反馈循环就是盲目的
- 即使是简单项目也能从基本冒烟测试中受益

## 阶段3：创建文件

### 1. CONTEXT.md（用于开发的静态参考）
```markdown
# [来自想法的项目名称]

## 我们要构建什么
[用户的愿景——保留其原意/意图]

## 现有代码库（如适用）
[对已存在内容的总结——关键文件、模式、架构]

## 技术栈
[检测到的或推断的]

## 命令
- 构建：[检测到的或标准的]
- 测试：[检测到的或标准的]
- 运行：[检测到的或标准的]

## 关键决策
[仅在用户指定了偏好、约束或要求时]

## 参考
- specs/ 目录用于详细规格说明
```

### 2. TASKS.md
将想法分解成具有可验证结果的原子任务：
- 先安排设置任务（如果缺失 node_modules/vendor/.env）
- **对于现有项目**：任务应引用要修改/扩展现有代码
- 然后是来自想法的功能（按逻辑顺序）
- 每个任务应在一个迭代周期内完成
- **格式：`- [ ] 操作 → 结果`**
    - 操作：要实施什么
    - 结果：如何验证其有效（必须是机器可检查的）
- 示例：
    - `- [ ] 在导航栏添加登录按钮 → 页眉中存在带 href="/login" 的按钮`
    - `- [ ] 创建 /api/users 端点 → GET /api/users 返回 200 及 JSON 数组`
    - `- [ ] 添加邮箱验证 → 无效邮箱显示错误信息`
- 任务数量应与项目范围匹配（不要堆砌）

### 3. specs/ 文件夹（仅在需要时）
创建能增加价值的规格说明——不要创建空的脚手架：
- 具有端点的 API 项目 → specs/API.md 包含路由、有效载荷
- 具有特定设计的 UI → specs/DESIGN_SYSTEM.md
- 复杂数据模型 → specs/DATA_MODEL.md
- 避免创建只会重复想法的规格说明

## 禁止事项
- **请勿编写实施代码**——无源文件、无 index.html、无 app.py 等
- 不要添加用户未要求的功能
- 不要创建只是重述显而易见内容的规格说明
- 不要超出其描述的范围
- 如果他们指定了架构选择，不要更改
- 不要添加"锦上添花"的任务——坚持想法本身
- 不要为"启动服务器"或其他手动用户操作创建任务
- **对于现有项目**：不要重新创建已存在的内容！

阅读想法，理解愿景，创建规划文件。实施将在稍后进行。